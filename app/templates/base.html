<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="gregmichnikov.com - A collection of web applications">
        <meta name="csrf-token" content="{{ csrf_token() }}">
        <title>{% block title %}{% endblock %} - gregmichnikov.com</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
        {% block styles %}{% endblock %}

        {% if config.GOOGLE_ADS_IDS and 'gregmichnikov.com' in request.host %}
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id={{ config.GOOGLE_ADS_IDS[0] }}"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          {% for ads_id in config.GOOGLE_ADS_IDS %}
          gtag('config', '{{ ads_id }}');
          {% endfor %}
        </script>
        {% endif %}
    </head>

    <body>
        <nav class="navbar">
            <div class="nav-container">
                <a href="{{ url_for('main.index') }}" class="nav-logo">gregmichnikov.com</a>
                
                <button class="nav-hamburger" id="navHamburger" aria-label="Toggle navigation">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </button>
                
                <ul class="nav-menu" id="navMenu">
                    {% if current_user.is_authenticated %}
                        {% if current_user.is_admin %}
                            <li class="nav-item nav-dropdown">
                                <button class="nav-link nav-dropdown-toggle" id="adminDropdown" aria-expanded="false">
                                    Admin
                                    <svg class="nav-dropdown-arrow" width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                                        <path d="M6 8L2 4h8z"/>
                                    </svg>
                                </button>
                                <ul class="nav-dropdown-menu" id="adminDropdownMenu">
                                    <li><a href="{{ url_for('admin.manage_users') }}" class="nav-dropdown-item">Manage Users</a></li>
                                    <li><a href="{{ url_for('admin.reset_password') }}" class="nav-dropdown-item">Reset Password</a></li>
                                    <li><a href="{{ url_for('admin.add_credits') }}" class="nav-dropdown-item">Add Credits</a></li>
                                    <li><a href="{{ url_for('admin.view_all_signup_lists') }}" class="nav-dropdown-item">View All Signup Lists</a></li>
                                    <li><a href="{{ url_for('admin.view_swap_requests') }}" class="nav-dropdown-item">Swap Requests</a></li>
                                    <li><a href="{{ url_for('admin.view_logs') }}" class="nav-dropdown-item">Logs</a></li>
                                    <li class="nav-divider" style="border-top: 1px solid #eee; margin: 5px 0;"></li>
                                    <li><a href="{{ url_for('betfake.admin_sync') }}" class="nav-dropdown-item">BetFake Sync</a></li>
                                </ul>
                            </li>
                        {% endif %}
                    {% endif %}
                    
                    <li class="nav-item">
                        <a href="{{ url_for('main.index') }}" class="nav-link nav-link-icon" title="Home">
                            <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                <polyline points="9 22 9 12 15 12 15 22"></polyline>
                            </svg>
                            <span class="nav-link-text">Home</span>
                        </a>
                    </li>
                    
                    {% if current_user.is_authenticated %}
                        <li class="nav-item">
                            <a href="{{ url_for('main.feedback') }}" class="nav-link nav-link-icon" title="Feedback">
                                <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                                    <line x1="9" y1="10" x2="15" y2="10"></line>
                                    <line x1="9" y1="14" x2="13" y2="14"></line>
                                </svg>
                                <span class="nav-link-text">Feedback</span>
                            </a>
                        </li>
                        <li class="nav-item nav-user">
                            <a href="{{ url_for('auth.profile') }}" class="nav-link">{{ current_user.email }}</a>
                        </li>
                        <li class="nav-item">
                            <a href="{{ url_for('auth.logout') }}" class="nav-link nav-button nav-link-icon" title="Logout">
                                <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                    <polyline points="16 17 21 12 16 7"></polyline>
                                    <line x1="21" y1="12" x2="9" y2="12"></line>
                                </svg>
                                <span class="nav-link-text">Logout</span>
                            </a>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a href="{{ url_for('auth.login') }}" class="nav-link nav-button">Login</a>
                        </li>
                        <li class="nav-item">
                            <a href="{{ url_for('auth.register') }}" class="nav-link nav-button-primary">Register</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </nav>

        <main class="main-content">
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    {% for message in messages %}
                        <div class="flash-message">{{ message }}</div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
            
            {% block content %}{% endblock %}
        </main>

        <footer class="footer">
            <p>&copy; 2025 gregmichnikov.com</p>
            <div class="footer-social">
                <a href="https://github.com/gmichnikov" target="_blank" rel="noopener noreferrer" class="footer-social-link" aria-label="GitHub">
                    <svg class="footer-social-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
                    </svg>
                </a>
                <a href="https://www.linkedin.com/in/gregmichnikov/" target="_blank" rel="noopener noreferrer" class="footer-social-link" aria-label="LinkedIn">
                    <svg class="footer-social-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                        <rect x="2" y="9" width="4" height="12"></rect>
                        <circle cx="4" cy="4" r="2"></circle>
                    </svg>
                </a>
                <a href="mailto:hi@gregmichnikov.com" class="footer-social-link" aria-label="Email">
                    <svg class="footer-social-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                        <polyline points="22,6 12,13 2,6"></polyline>
                    </svg>
                </a>
                <a href="https://cloud.google.com/blog/search/?query=Greg+Michnikov&category=article" target="_blank" rel="noopener noreferrer" class="footer-social-link footer-social-link-google" aria-label="Google Cloud Blog Posts">
                    <svg class="footer-social-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <!-- Document outline -->
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" fill="none"/>
                        <polyline points="14,2 14,8 20,8" stroke="currentColor" fill="none"/>
                        <!-- Text lines with Google colors (blue, red, yellow, green) -->
                        <line x1="8" y1="12" x2="16" y2="12" stroke="#4285F4" stroke-width="1.8" stroke-linecap="round"/>
                        <line x1="8" y1="15" x2="16" y2="15" stroke="#EA4335" stroke-width="1.8" stroke-linecap="round"/>
                        <line x1="8" y1="18" x2="14" y2="18" stroke="#FBBC05" stroke-width="1.8" stroke-linecap="round"/>
                        <!-- Small Google "G" style circle accent in top corner -->
                        <circle cx="18" cy="5" r="2.5" fill="#34A853" stroke="none"/>
                    </svg>
                </a>
            </div>
        </footer>

        <script>
            // Mobile hamburger menu toggle
            const hamburger = document.getElementById('navHamburger');
            const navMenu = document.getElementById('navMenu');
            
            if (hamburger && navMenu) {
                hamburger.addEventListener('click', function() {
                    navMenu.classList.toggle('nav-menu-active');
                    hamburger.classList.toggle('hamburger-active');
                });
                
                // Close menu when clicking a link
                const navLinks = navMenu.querySelectorAll('.nav-link');
                navLinks.forEach(link => {
                    link.addEventListener('click', function() {
                        navMenu.classList.remove('nav-menu-active');
                        hamburger.classList.remove('hamburger-active');
                    });
                });
                
                // Close menu when clicking outside
                document.addEventListener('click', function(event) {
                    if (!hamburger.contains(event.target) && !navMenu.contains(event.target)) {
                        navMenu.classList.remove('nav-menu-active');
                        hamburger.classList.remove('hamburger-active');
                    }
                });
            }
            
            // Dropdown menu toggle
            const adminDropdown = document.getElementById('adminDropdown');
            const adminDropdownMenu = document.getElementById('adminDropdownMenu');
            
            if (adminDropdown && adminDropdownMenu) {
                adminDropdown.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    adminDropdownMenu.classList.toggle('nav-dropdown-menu-active');
                    adminDropdown.setAttribute('aria-expanded', 
                        adminDropdownMenu.classList.contains('nav-dropdown-menu-active'));
                });
                
                // Close dropdown when clicking outside
                document.addEventListener('click', function(event) {
                    if (!adminDropdown.contains(event.target) && !adminDropdownMenu.contains(event.target)) {
                        adminDropdownMenu.classList.remove('nav-dropdown-menu-active');
                        adminDropdown.setAttribute('aria-expanded', 'false');
                    }
                });
                
                // Close dropdown when clicking a dropdown item
                const dropdownItems = adminDropdownMenu.querySelectorAll('.nav-dropdown-item');
                dropdownItems.forEach(item => {
                    item.addEventListener('click', function() {
                        adminDropdownMenu.classList.remove('nav-dropdown-menu-active');
                        adminDropdown.setAttribute('aria-expanded', 'false');
                    });
                });
            }
            
        </script>

        {% block scripts %}{% endblock %}
    </body>
</html>