{% extends "base.html" %}

{% block title %}{{ group.name }}{% endblock %}

{% block content %}
<div class="meals-container">
    <div class="meals-nav">
        <a href="{{ url_for('meals.index') }}" class="meals-back-link">&larr; Back to Dashboard</a>
    </div>

    <div class="meals-header">
        <h1 class="meals-title">{{ group.name }}</h1>
        <div class="meals-actions">
            {# Future location for Log Meal button #}
            <button class="meals-button" disabled>Log a Meal (Phase 2)</button>
        </div>
    </div>

    <div class="meals-section">
        <h2>Family Members</h2>
        <div class="meals-members-list">
            {% for member in group.members %}
                <div class="meals-member-item">
                    <span class="meals-member-name">{{ member.display_name }}</span>
                    {% if member.user_id %}
                        <span class="meals-badge">Linked</span>
                    {% else %}
                        <span class="meals-badge meals-badge-guest">Guest</span>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    </div>

    <div class="meals-grid">
        <div class="meals-card">
            <h3>Invite Member</h3>
            <p class="meals-card-desc">Invite someone with an account via email.</p>
            <form action="{{ url_for('meals.invite_member', group_id=group.id) }}" method="POST">
                {{ invite_form.hidden_tag() }}
                <div class="meals-form-group">
                    {{ invite_form.email(class="meals-input", placeholder="email@example.com") }}
                </div>
                {{ invite_form.submit(class="meals-button meals-button-secondary") }}
            </form>
        </div>

        <div class="meals-card">
            <h3>Add Guest</h3>
            <p class="meals-card-desc">Add a member without an account (e.g., a child).</p>
            <form action="{{ url_for('meals.add_guest_member', group_id=group.id) }}" method="POST">
                {{ guest_form.hidden_tag() }}
                <div class="meals-form-group">
                    {{ guest_form.display_name(class="meals-input", placeholder="Name") }}
                </div>
                {{ guest_form.submit(class="meals-button meals-button-secondary") }}
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('meals.static', filename='meals/style.css') }}">
{% endblock %}
