{% extends 'base.html' %}

{% block title %}Todo List{% endblock %}

{% block content %}

<link rel="stylesheet" href="{{ url_for('todo.static', filename='todo/styles.css') }}">

<div class="todo-container">
    <div class="todo-header">
        <h1 class="todo-title">üìù My Tasks</h1>
        <p class="todo-subtitle">Stay organized and productive</p>
    </div>

    <!-- Add Task Form -->
    <div class="todo-add-section">
        <form method="POST" action="{{ url_for('todo.add') }}" class="todo-form">
            {{ form.hidden_tag() }}
            <div class="todo-input-group">
                {{ form.title(class="todo-input") }}
                {{ form.submit(class="todo-submit-btn") }}
            </div>
        </form>
    </div>

    <!-- Filter Tabs -->
    <div class="todo-filters">
        <a href="{{ url_for('todo.index', filter='all') }}" 
           class="filter-btn {% if filter_type == 'all' %}active{% endif %}">
            All ({{ total_count }})
        </a>
        <a href="{{ url_for('todo.index', filter='active') }}" 
           class="filter-btn {% if filter_type == 'active' %}active{% endif %}">
            Active ({{ active_count }})
        </a>
        <a href="{{ url_for('todo.index', filter='completed') }}" 
           class="filter-btn {% if filter_type == 'completed' %}active{% endif %}">
            Completed ({{ completed_count }})
        </a>
    </div>

    <!-- Todo List -->
    <div class="todo-list">
        {% if todos %}
            {% for todo in todos %}
                <div class="todo-item {% if todo.completed %}completed{% endif %}">
                    <form method="POST" action="{{ url_for('todo.complete', id=todo.id, filter=filter_type) }}" class="todo-check-form">
                        {{ form.hidden_tag() }}
                        <button type="submit" class="todo-checkbox">
                            {% if todo.completed %}
                                <span class="checkmark">‚úì</span>
                            {% endif %}
                        </button>
                    </form>
                    
                    <div class="todo-content">
                        <span class="todo-text">{{ todo.title }}</span>
                        <span class="todo-date">{{ todo.created_at.strftime('%b %d, %Y at %I:%M %p') }}</span>
                    </div>
                    
                    <form method="POST" action="{{ url_for('todo.delete', id=todo.id, filter=filter_type) }}" class="todo-delete-form">
                        {{ form.hidden_tag() }}
                        <button type="submit" class="todo-delete-btn" onclick="return confirm('Are you sure you want to delete this task?')">
                            üóëÔ∏è
                        </button>
                    </form>
                </div>
            {% endfor %}
        {% else %}
            <div class="todo-empty">
                <div class="empty-icon">‚ú®</div>
                <p class="empty-message">
                    {% if filter_type == 'active' %}
                        No active tasks. Great job!
                    {% elif filter_type == 'completed' %}
                        No completed tasks yet.
                    {% else %}
                        No tasks yet. Add one to get started!
                    {% endif %}
                </p>
            </div>
        {% endif %}
    </div>
</div>

{% endblock %}

