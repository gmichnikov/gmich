{% extends "base.html" %}

{% block title %}My Notes{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('notes.static', filename='notes.css') }}">
{% endblock %}

{% block content %}
<div class="notes-page">
    <div class="notes-container">
        <div class="notes-header">
            <h1 class="notes-title">My Notes</h1>
            <a href="{{ url_for('notes.new') }}" class="notes-btn notes-btn-primary">+ New Note</a>
        </div>

        <form action="{{ url_for('notes.search') }}" method="get" class="notes-search-form">
            <input type="text" name="q" placeholder="Search notes..." class="notes-search-input" id="search-input">
            <button type="submit" id="search-btn" class="notes-btn notes-btn-secondary" disabled>Search</button>
        </form>

        <div style="margin-bottom: 20px;">
            <a href="{{ url_for('notes.archived') }}" class="notes-link">View Archived Notes</a>
        </div>

        {% if notes %}
        <div class="notes-card">
            <table class="notes-table">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Preview</th>
                        <th>Created</th>
                        <th>Modified</th>
                    </tr>
                </thead>
                <tbody>
                    {% for note in notes %}
                    <tr>
                        <td>
                            <a href="{{ url_for('notes.view', note_id=note.id) }}" class="notes-table-title">
                                {{ note.title }}
                            </a>
                        </td>
                        <td class="notes-table-preview">{{ note.content|note_preview }}</td>
                        <td class="notes-table-date">{{ note.created_at|note_datetime }}</td>
                        <td class="notes-table-date">{{ note.modified_at|note_datetime }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="notes-empty">
            <div class="notes-empty-icon">üìù</div>
            <p class="notes-empty-text">No notes yet. Create your first note!</p>
            <a href="{{ url_for('notes.new') }}" class="notes-btn notes-btn-primary">+ Create Note</a>
        </div>
        {% endif %}
    </div>
</div>

<script>
const searchInput = document.getElementById('search-input');
const searchBtn = document.getElementById('search-btn');

searchInput.addEventListener('input', function() {
    const hasValue = this.value.trim().length > 0;
    searchBtn.disabled = !hasValue;
});
</script>
{% endblock %}
